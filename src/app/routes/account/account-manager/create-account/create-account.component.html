<nz-modal [(nzVisible)]="isVisible" [nzFooter]="null" nzTitle="Add Account" [nzWidth]="800" (nzOnCancel)="handleCancel()">
  <form *ngIf="account" nz-form [formGroup]="validateForm" class="login-form" (ngSubmit)="submitForm()">
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="firstName">FirstName</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <input type="text" nz-input formControlName="firstName" placeholder="FirstName" [(ngModel)]="account.firstName" (ngModelChange)="onChange()">
        <nz-form-explain *ngIf="validateForm.get('firstName').dirty && validateForm.get('firstName').errors">Please input FirstName!</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="lastName">LastName</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <input type="text" nz-input formControlName="lastName" placeholder="LastName" [(ngModel)]="account.lastName" (ngModelChange)="onChange()">
        <nz-form-explain *ngIf="validateForm.get('lastName').dirty && validateForm.get('lastName').errors">Please input LastName!</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="displayName">DisplayName</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <input type="text" nz-input formControlName="displayName" placeholder="DisplayName" [(ngModel)]="account.displayName">
        <nz-form-explain *ngIf="validateForm.get('displayName').dirty && validateForm.get('displayName').errors">Please input DisplayName!</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="school">School</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-cascader [nzOptions]="schoolCountry" formControlName="schoolCountry" [(ngModel)]="schoolValues" (ngModelChange)="onChanges($event)"
          [nzDisabled]="isSchoolRole">
        </nz-cascader>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="role">Role</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-select formControlName="role" nzShowSearch nzAllowClear nzPlaceHolder="Select a Role" [(ngModel)]="account.role">
          <nz-option nzLabel="Student" nzValue="Student"></nz-option>
          <nz-option nzLabel="Faculty" nzValue="Faculty "></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="role">Liscence </nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-radio-group formControlName="liscence" [(ngModel)]="account.liscence">
          <label nz-radio [nzValue]="">NONE</label>
          <label nz-radio [nzValue]="item.type" [nzDisabled]="item.maxCount<=item.useCount" *ngFor="let item of liscenceNodes">{{item.type}}
            <span class="label label-primary">{{item.maxCount-item.useCount}}</span>
          </label>
        </nz-radio-group>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">Email</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <input type="email" nz-input formControlName="email" placeholder="Email" [(ngModel)]="account.email">
      </nz-form-control>
    </nz-form-item>
    <div class="modal-footer">
      <button nz-button [disabled]="saving" type="button" (click)="handleCancel()"> {{l("Cancel")}}</button>
      <button nz-button nzType="primary" [disabled]="!validateForm.valid"> {{l("Save")}}</button>

    </div>
  </form>

</nz-modal>
